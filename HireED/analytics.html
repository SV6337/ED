<!DOCTYPE html>
<html>
<head>
<title>HireED Analytics</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root {
    /* Light Mode Colors - Matching interview.html */
    --primary: #008080;
    --primary-light: #83c5be;
    --primary-dark: #004e5a;
    --secondary: #3a506b;
    --accent: #ff9e7d;
    --light: #f8f9fa;
    --dark: #2b2d42;
    --gray: #e9ecef;
    --success: #4caf50;
    --warning: #ff9800;
    --danger: #f44336;
    --card-bg: #ffffff;
    --text-primary: #2b2d42;
    --text-secondary: #4a4e69;
    --border-color: rgba(0, 0, 0, 0.08);
    --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    
    /* Dark Mode Colors */
    --dark-primary: #008080;
    --dark-primary-light: #006d77;
    --dark-primary-dark: #004e5a;
    --dark-secondary: #b8c2cc;
    --dark-accent: #ff9e7d;
    --dark-light: #121212;
    --dark-dark: #e0e0e0;
    --dark-gray: #1e1e1e;
    --dark-card-bg: #1e1e1e;
    --dark-text-primary: #e0e0e0;
    --dark-text-secondary: #b8c2cc;
    --dark-border-color: rgba(255, 255, 255, 0.08);
    --dark-card-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    
    /* Shared Variables */
    --border-radius: 12px;
    --transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

body {
    font-family: 'Poppins', sans-serif;
    margin: 0;
    padding: 0;
    background-color: var(--light);
    color: var(--text-primary);
    line-height: 1.6;
    transition: background-color 0.3s ease, color 0.3s ease;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

body.dark {
    --primary: var(--dark-primary);
    --primary-light: var(--dark-primary-light);
    --primary-dark: var(--dark-primary-dark);
    --secondary: var(--dark-secondary);
    --accent: var(--dark-accent);
    --light: var(--dark-light);
    --dark: var(--dark-dark);
    --gray: var(--dark-gray);
    --card-bg: var(--dark-card-bg);
    --text-primary: var(--dark-text-primary);
    --text-secondary: var(--dark-text-secondary);
    --border-color: var(--dark-border-color);
    --card-shadow: var(--dark-card-shadow);
}

/* Header */
header {
    background: linear-gradient(180deg, var(--primary-dark), var(--primary));
    color: white;
    padding: 15px 0;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
}

.header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.logo {
    display: flex;
    align-items: center;
    gap: 12px;
}

.logo i {
    font-size: 2rem;
}

.logo h1 {
    margin: 0;
    font-size: 1.8rem;
    font-weight: 600;
}

nav ul {
    display: flex;
    list-style: none;
    margin: 0;
    padding: 0;
    gap: 5px;
}

nav ul li a {
    color: white;
    text-decoration: none;
    padding: 10px 15px;
    border-radius: 8px;
    transition: var(--transition);
    font-weight: 500;
    display: block;
}

nav ul li a:hover,
nav ul li a.active {
    background-color: rgba(255, 255, 255, 0.15);
}

/* Main Content */
main {
    flex: 1;
    padding: 30px 0;
}

.page-header {
    margin: 30px 0;
    text-align: center;
}

.page-header h1 {
    color: var(--primary);
    font-size: 2.2rem;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
}

.page-header p {
    color: var(--text-secondary);
    font-size: 1.1rem;
    max-width: 700px;
    margin: 0 auto;
}

/* Analytics Content */
.analytics-content {
    margin: 40px 0;
}

h2 {
    text-align: center;
    color: var(--primary);
    margin-bottom: 30px;
    font-size: 2rem;
}

.graph-section {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 25px;
    margin-top: 30px;
}

.card {
    background: var(--card-bg);
    padding: 25px;
    border-radius: var(--border-radius);
    box-shadow: var(--card-shadow);
    border: 1px solid var(--border-color);
    transition: var(--transition);
}

.card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
}

.card h3 {
    color: var(--text-primary);
    margin-top: 0;
    margin-bottom: 20px;
    font-size: 1.3rem;
    border-bottom: 2px solid var(--primary);
    padding-bottom: 10px;
}

/* Footer */
footer {
    background-color: var(--primary-dark);
    color: white;
    padding: 40px 0 20px;
    margin-top: 50px;
}

.footer-content {
    display: flex;
    flex-wrap: wrap;
    gap: 40px;
    margin-bottom: 30px;
}

.footer-column {
    flex: 1;
    min-width: 250px;
}

.footer-column h3 {
    font-size: 1.3rem;
    margin-bottom: 20px;
    color: white;
}

.footer-column p {
    color: rgba(255, 255, 255, 0.8);
    line-height: 1.6;
}

.footer-column ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.footer-column ul li {
    margin-bottom: 10px;
}

.footer-column ul li a {
    color: rgba(255, 255, 255, 0.8);
    text-decoration: none;
    transition: var(--transition);
}

.footer-column ul li a:hover {
    color: white;
    padding-left: 5px;
}

.copyright {
    text-align: center;
    padding-top: 20px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    color: rgba(255, 255, 255, 0.7);
    font-size: 0.9rem;
}

/* Theme Toggle */
.theme-toggle {
    position: fixed;
    bottom: 25px;
    right: 25px;
    z-index: 1000;
}

.toggle-container {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 50px;
    height: 50px;
    background: var(--card-bg);
    border-radius: 50%;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    cursor: pointer;
    transition: all 0.3s ease;
    border: 2px solid var(--border-color);
}

.toggle-container:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
}

.toggle-icon {
    font-size: 1.4rem;
    color: var(--primary);
    transition: all 0.3s ease;
}

body.dark .toggle-icon {
    color: var(--accent);
}

/* Responsive Styles */
@media (max-width: 992px) {
    .graph-section {
        grid-template-columns: 1fr;
        gap: 20px;
    }
}

@media (max-width: 768px) {
    .header-content {
        flex-direction: column;
        gap: 15px;
    }
    
    nav ul {
        flex-wrap: wrap;
        justify-content: center;
    }
    
    nav ul li a {
        padding: 8px 12px;
        font-size: 0.9rem;
    }
    
    .page-header h1 {
        font-size: 1.8rem;
    }
    
    .page-header p {
        font-size: 1rem;
    }
    
    .footer-content {
        flex-direction: column;
        gap: 30px;
    }
}

@media (max-width: 480px) {
    .page-header h1 {
        font-size: 1.5rem;
    }
    
    .card {
        padding: 20px;
    }
    
    .card h3 {
        font-size: 1.2rem;
    }
}

/* Animation for theme toggle */
@keyframes themeChange {
    0% { transform: scale(1) rotate(0deg); }
    50% { transform: scale(1.1) rotate(180deg); }
    100% { transform: scale(1) rotate(360deg); }
}

.toggle-container.theme-changed {
    animation: themeChange 0.6s ease;
}
</style>

</head>

<body>
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-chart-line"></i>
                <h1>HireED</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="interview.html">Interview Prep</a></li>
                    <li><a href="resume.html">Resume Builder</a></li>
                    <li><a href="coding.html">Coding Practice</a></li>
                    <li><a href="dsa.html">DSA Practice</a></li>
                    <li><a href="debugging.html">Debugging</a></li>
                    <li><a href="aptitude.html">Aptitude Tests</a></li>
                    <li><a href="mocktest.html">Mock Test</a></li>
                    <li><a href="chat-history.html">Chat History</a></li>
                    <li><a href="analytics.html" class="active">Analytics</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container">
        <div class="page-header">
            <h1><i class="fas fa-chart-bar"></i> AI Chatbot Analytics Dashboard</h1>
            <p>Track your performance and time spent across different practice sections</p>
        </div>

        <div class="analytics-content">
            <div class="graph-section">
                <div class="card">
                    <h3>Time Spent on Sections (Minutes)</h3>
                    <canvas id="timeChart"></canvas>
                </div>

                <div class="card">
                    <h3>Performance per Section (%)</h3>
                    <canvas id="scoreChart"></canvas>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>HireED</h3>
                    <p>Your AI-powered career preparation assistant helping you land your dream job.</p>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="interview.html">Interview Preparation</a></li>
                        <li><a href="resume.html">Resume Builder</a></li>
                        <li><a href="coding.html">Coding Practice</a></li>
                        <li><a href="debugging.html">Debugging</a></li>
                        <li><a href="aptitude.html">Aptitude Test</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Contact</h3>
                    <ul>
                        <li><a href="mailto:support@hired.com">support@hired.com</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                &copy; 2023 HireED. All rights reserved.
            </div>
        </div>
    </footer>

    <!-- Theme Toggle -->
    <div class="theme-toggle" id="themeToggle">
        <div class="toggle-container">
            <i class="fas fa-adjust toggle-icon"></i>
        </div>
    </div>

<script>
/* ====== INITIAL STRUCTURE ====== */

let analytics =
 JSON.parse(localStorage.getItem("hireed_analytics")) || {

 interview:{time:0, score:0},
 coding:{time:0, score:0},
 aptitude:{time:0, score:0},
 debugging:{time:0, score:0}

};

localStorage.setItem("hireed_analytics",
 JSON.stringify(analytics));

/* ====== GRAPH 1 ====== */

new Chart(document.getElementById("timeChart"),{
 type:"bar",
 data:{
  labels:Object.keys(analytics),
  datasets:[{
   label:"Minutes",
   data:Object.values(analytics).map(a=>a.time),
   backgroundColor:"#008080"
  }]
 },
 options: {
    responsive: true,
    maintainAspectRatio: true,
    plugins: {
        legend: {
            labels: {
                color: getComputedStyle(document.body).getPropertyValue('--text-primary')
            }
        }
    },
    scales: {
        x: {
            ticks: {
                color: getComputedStyle(document.body).getPropertyValue('--text-secondary')
            },
            grid: {
                color: getComputedStyle(document.body).getPropertyValue('--border-color')
            }
        },
        y: {
            ticks: {
                color: getComputedStyle(document.body).getPropertyValue('--text-secondary')
            },
            grid: {
                color: getComputedStyle(document.body).getPropertyValue('--border-color')
            }
        }
    }
 }
});


/* ====== GRAPH 2 ====== */

new Chart(document.getElementById("scoreChart"),{
 type:"line",
 data:{
  labels:Object.keys(analytics),
  datasets:[{
   label:"Score %",
   data:Object.values(analytics).map(a=>a.score),
   borderColor:"#ff9e7d",
   backgroundColor: "rgba(255, 158, 125, 0.1)",
   fill: true,
   tension: 0.3
  }]
 },
 options:{
  responsive: true,
  maintainAspectRatio: true,
  scales:{
    y:{
        min:0,
        max:100,
        ticks: {
            color: getComputedStyle(document.body).getPropertyValue('--text-secondary')
        },
        grid: {
            color: getComputedStyle(document.body).getPropertyValue('--border-color')
        }
    },
    x: {
        ticks: {
            color: getComputedStyle(document.body).getPropertyValue('--text-secondary')
        },
        grid: {
            color: getComputedStyle(document.body).getPropertyValue('--border-color')
        }
    }
  },
  plugins: {
    legend: {
        labels: {
            color: getComputedStyle(document.body).getPropertyValue('--text-primary')
        }
    }
  }
 }
});


/* ====== GLOBAL UPDATE FUNCTION ====== */

window.updateAnalytics = function(section,time,score){

 let data=
  JSON.parse(localStorage.getItem("hireed_analytics"));

 if(!data[section])
   data[section]={time:0,score:0};

 data[section].time += time;

 if(score)
   data[section].score = score;

 localStorage.setItem("hireed_analytics",
  JSON.stringify(data));

}

// Theme Toggle Functionality
document.addEventListener('DOMContentLoaded', function() {
    const themeToggle = document.getElementById('themeToggle');
    
    // Check for saved theme preference
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const savedTheme = localStorage.getItem('theme');
    
    if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
        document.body.classList.add('dark');
    }
    
    // Toggle theme on click
    themeToggle.addEventListener('click', function() {
        const container = themeToggle.querySelector('.toggle-container');
        const icon = themeToggle.querySelector('.toggle-icon');
        
        // Add animation class
        container.classList.add('theme-changed');
        
        // Remove animation class after it completes
        setTimeout(() => {
            container.classList.remove('theme-changed');
        }, 600);
        
        // Toggle theme
        document.body.classList.toggle('dark');
        const isDark = document.body.classList.contains('dark');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
        
        // Change icon
        if (isDark) {
            icon.classList.replace('fa-sun', 'fa-adjust');
            icon.classList.replace('fa-moon', 'fa-adjust');
        }
    });
    
    // Listen for system theme changes
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
        if (!localStorage.getItem('theme')) {
            document.body.classList.toggle('dark', e.matches);
        }
    });
});
</script>

</body>
</html>